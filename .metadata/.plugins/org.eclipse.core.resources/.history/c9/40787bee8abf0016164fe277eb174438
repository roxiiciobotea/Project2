package main;

import java.sql.Date;

import components.Bidder;
import components.Buyer;
import filter.MinimumAppearedDateFilter;
import filter.MinimumOfferedValueFilter;
import service.Dispatcher;
import serviceComponents.Filter;

public class Main {
	public static void main(String[] args) {
		Dispatcher d = Dispatcher.instance();

		Bidder ibm = new Bidder("IBM");
		Buyer jonSnow = new Buyer("Jon Snow");

		// testing filters
		Filter f = new MinimumAppearedDateFilter(Date.valueOf("2016-12-9")); // ok
		Filter f2 = new MinimumOfferedValueFilter(80);// ok
		Filter f3 = new PriceRangeFilter(50, 80);

		// creating subscriptions
		d.subscribe(jonSnow, "NEW_OFFER", f);
		d.subscribe(ibm, "INTERESTED_BUYER", f2);

		ibm.issueOffer(Date.valueOf("2016-12-10"), 100);
		jonSnow.interestedInOffer(Date.valueOf("2016-12-11"), 90);

	}
}
